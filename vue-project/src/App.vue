<script>
  import { RouterLink, RouterView } from "vue-router";
  import { mapGetters, mapActions } from 'vuex'
  import HamburgerSVG from './components/icons/Hamburger.vue'

  export default {
    data() {
      return {
        login: true
      }
    },
    computed: {
      ...mapGetters({
        authenticated: 'auth/authenticated',
        user: 'auth/user',
        role: 'assets/role'
      }),
    },
    methods: {
      ...mapActions({
        signOutAction: 'auth/signOut'
      }),
      signOut() {
        this.signOutAction().then(() => {
          this.$router.replace({
            name: 'home'
          })
        })
      }
    },
    components: {
      HamburgerSVG
    }
  }

</script>

<template>
  <header>
    <div class="wrapper">
      <nav>
        <div class="nav-wrapper-extra nav-wrapper">
          <RouterLink to="/">
            <svg style="margin-right: 5px;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 48 48"
              height="24" width="24">
              <path fill="#A6CFFF"
                d="M4.13459 7.59731C4.23926 5.87411 5.36053 4.5395 7.07238 4.31608C8.3939 4.1436 10.3038 4 13 4C15.6962 4 17.6061 4.1436 18.9276 4.31608C20.6395 4.5395 21.7607 5.87411 21.8654 7.59732C21.9403 8.82978 22 10.5734 22 13C22 15.4266 21.9403 17.1702 21.8654 18.4027C21.7607 20.1259 20.6395 21.4605 18.9276 21.6839C17.6061 21.8564 15.6962 22 13 22C10.3038 22 8.3939 21.8564 7.07238 21.6839C5.36053 21.4605 4.23926 20.1259 4.13459 18.4027C4.05973 17.1702 4 15.4266 4 13C4 10.5734 4.05973 8.82978 4.13459 7.59731Z">
              </path>
              <path fill="#A6CFFF"
                d="M4.13459 40.4027C4.23926 42.1259 5.36053 43.4605 7.07238 43.6839C8.3939 43.8564 10.3038 44 13 44C15.6962 44 17.6061 43.8564 18.9276 43.6839C20.6395 43.4605 21.7607 42.1259 21.8654 40.4027C21.9403 39.1702 22 37.4266 22 35C22 32.5734 21.9403 30.8298 21.8654 29.5973C21.7607 27.8741 20.6395 26.5395 18.9276 26.3161C17.6061 26.1436 15.6962 26 13 26C10.3038 26 8.3939 26.1436 7.07238 26.3161C5.36053 26.5395 4.23926 27.8741 4.13459 29.5973C4.05973 30.8298 4 32.5734 4 35C4 37.4266 4.05973 39.1702 4.13459 40.4027Z">
              </path>
              <path fill="#A6CFFF"
                d="M40.4027 4.13459C42.1259 4.23926 43.4605 5.36053 43.6839 7.07238C43.8564 8.3939 44 10.3038 44 13C44 15.6962 43.8564 17.6061 43.6839 18.9276C43.4605 20.6395 42.1259 21.7607 40.4027 21.8654C39.1702 21.9403 37.4266 22 35 22C32.5734 22 30.8298 21.9403 29.5973 21.8654C27.8741 21.7607 26.5395 20.6395 26.3161 18.9276C26.1436 17.6061 26 15.6962 26 13C26 10.3038 26.1436 8.3939 26.3161 7.07238C26.5395 5.36052 27.8741 4.23926 29.5973 4.13459C30.8298 4.05973 32.5734 4 35 4C37.4266 4 39.1702 4.05973 40.4027 4.13459Z">
              </path>
              <path fill="#A6CFFF"
                d="M40.4027 43.8654C42.1259 43.7607 43.4605 42.6395 43.6839 40.9276C43.8564 39.6061 44 37.6962 44 35C44 32.3038 43.8564 30.3939 43.6839 29.0724C43.4605 27.3605 42.1259 26.2393 40.4027 26.1346C39.1702 26.0597 37.4266 26 35 26C32.5734 26 30.8298 26.0597 29.5973 26.1346C27.8741 26.2393 26.5395 27.3605 26.3161 29.0724C26.1436 30.3939 26 32.3038 26 35C26 37.6962 26.1436 39.6061 26.3161 40.9276C26.5395 42.6395 27.8741 43.7607 29.5973 43.8654C30.8298 43.9403 32.5734 44 35 44C37.4266 44 39.1702 43.9403 40.4027 43.8654Z">
              </path>
            </svg>
            Assets
          </RouterLink>
        </div>
        <template v-if="authenticated">
          <div class="nav-wrapper nav-wrapper-mobile">
            <p>Hello {{ user.name }}</p>
            <RouterLink to="/post">Add asset</RouterLink>
            <a href="/" @click.prevent="signOut">Logout</a>
          </div>
          <div class="nav-wrapper hidden">
            <HamburgerSVG class="hidden" />
          </div>
        </template>
        <template v-else>
          <div class="nav-wrapper nav-wrapper-mobile">
            <RouterLink to="/login">Login</RouterLink>
          </div>
          <div class="nav-wrapper hidden">
            <HamburgerSVG class="hidden" />
          </div>
        </template>
      </nav>
    </div>
  </header>

  <RouterView />
  <Footer />
</template>

<style scoped>
  .hidden {
    display: none !important;
  }

  .wrapper {
    display: flex;
    align-items: center;
    background-color: #89ABE3FF;
    height: 70px;
  }

  nav {
    display: flex;
    justify-content: space-between;
    width: 100%;
    gap: 30px;
    font-size: 18px;
  }

  .nav-wrapper {
    display: flex;
    gap: 30px;
  }

  .nav-wrapper>a,
  .nav-wrapper>p {
    text-decoration: none;
    color: white;
    font-weight: 600;
  }

  .nav-wrapper>p {
    color: rgb(228, 228, 228);
  }

  .nav-wrapper-extra>a {
    font-size: 23px;
    font-weight: 700;
    display: flex;
    align-items: center;
  }

  @media (max-width:801px) {
    .hidden {
      display: flex !important;
    }

    .nav-wrapper-mobile {
      display: none !important;
    }
  }
</style>